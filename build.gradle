buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
		classpath 'com.github.abrarsyed.gmcp:GMCP:latest.integration'
    }
}

apply plugin: "gmcp"

ext.env = System.getenv()
version = new File('version.txt').text + env.BUILD_NUMBER

println 'Version: ' + project.version
archivesBaseName = 'HoloInventory'
minecraft {
	minecraftVersion = "1.6.4"
    accessTransformers += 'src/main/resources/devcapes.at'
}

processResources
{
    from(sourceSets.main.resources.srcDirs) {
        include '**/*.info'
        expand 'version':project.version, 'mcversion':project.minecraft.minecraftVersion
    }

    from(sourceSets.main.resources.srcDirs) {
        exclude '**/*.info'
    }
}
// because the normal default jar task has been modified to be obfuscated
task deobfJar(type: Jar) {
	from sourceSets.main.output
	appendix = 'dev'
}

artifacts {
	archives deobfJar
}